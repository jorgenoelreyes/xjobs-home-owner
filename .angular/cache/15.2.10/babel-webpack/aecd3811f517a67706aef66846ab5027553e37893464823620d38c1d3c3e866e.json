{"ast":null,"code":"import _asyncToGenerator from \"/Users/jorgereyes/xjobs/codigo/home-owner/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport { NgChartsModule } from \"ng2-charts\";\nimport \"chart.js/auto\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"ng2-charts\";\nfunction AppComponent_tr_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"\\u2014\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"td\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"td\");\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"td\");\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"td\");\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"td\");\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"td\");\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"td\");\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"td\");\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"td\");\n    i0.ɵɵtext(40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"td\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"td\");\n    i0.ɵɵtext(44);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r1 = ctx.$implicit;\n    let tmp_8_0;\n    let tmp_9_0;\n    let tmp_11_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(r_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.phone || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.email || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.address || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.city || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.state || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.country || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((tmp_8_0 = r_r1.lat) !== null && tmp_8_0 !== undefined ? tmp_8_0 : \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((tmp_9_0 = r_r1.lng) !== null && tmp_9_0 !== undefined ? tmp_9_0 : \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.skills || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((tmp_11_0 = r_r1.exp) !== null && tmp_11_0 !== undefined ? tmp_11_0 : \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.certs || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.langs || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.availability || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.rate || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.education || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.license || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.vehicle || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.eligibility || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1.source || \"\\u2014\");\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    labels: a0,\n    datasets: a1\n  };\n};\nexport class AppComponent {\n  constructor() {\n    this.rows = [{\n      name: \"Alice\",\n      category: \"electrician\",\n      city: \"Miami\",\n      country: \"US\",\n      exp: 3,\n      source: \"seed\"\n    }, {\n      name: \"Bob\",\n      category: \"painter\",\n      city: \"Miami\",\n      country: \"US\",\n      exp: 2,\n      source: \"seed\"\n    }, {\n      name: \"Cathy\",\n      category: \"other\",\n      city: \"Miami\",\n      country: \"US\",\n      exp: 1,\n      source: \"seed\"\n    }, {\n      name: \"Dan\",\n      category: \"other\",\n      city: \"Miami\",\n      country: \"US\",\n      exp: 4,\n      source: \"seed\"\n    }, {\n      name: \"Eva\",\n      category: \"other\",\n      city: \"Miami\",\n      country: \"US\",\n      exp: 2,\n      source: \"seed\"\n    }];\n    this.filtered = [...this.rows];\n    this.total = this.rows.length;\n    this.barChartType = \"bar\";\n    this.barChartLabels = [];\n    this.barChartData = [{\n      data: [],\n      label: \"Workers\"\n    }];\n    this.barChartOptions = {\n      responsive: true,\n      plugins: {\n        legend: {\n          display: false\n        }\n      },\n      scales: {\n        x: {\n          beginAtZero: true\n        },\n        y: {\n          beginAtZero: true\n        }\n      }\n    };\n    this.refreshChart();\n  }\n  computeCategoryCounts(rows) {\n    const map = new Map();\n    for (const r of rows) {\n      const k = (r.category || \"unknown\").toLowerCase();\n      map.set(k, (map.get(k) || 0) + 1);\n    }\n    return Array.from(map.entries()).sort((a, b) => a[0].localeCompare(b[0]));\n  }\n  refreshChart() {\n    const entries = this.computeCategoryCounts(this.filtered);\n    this.barChartLabels = entries.map(e => e[0]);\n    this.barChartData = [{\n      data: entries.map(e => e[1]),\n      label: \"Workers\"\n    }];\n  }\n  clearAll() {\n    this.rows = [];\n    this.filtered = [];\n    this.total = 0;\n    this.refreshChart();\n  }\n  geocodeMissing() {\n    for (const r of this.rows) {\n      if (r.lat == null || r.lng == null) {\n        r.lat = 25.7 + (Math.random() - 0.5) * 0.5;\n        r.lng = -80.3 + (Math.random() - 0.5) * 0.5;\n      }\n    }\n    this.filtered = [...this.rows];\n    this.total = this.rows.length;\n    this.refreshChart();\n  }\n  onPickFiles(event) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const input = event.target;\n      const files = Array.from(input.files || []);\n      if (!files.length) {\n        input.value = \"\";\n        return;\n      }\n      _this.clearAll();\n      for (const f of files) {\n        if (f.name.toLowerCase().endsWith(\".csv\")) {\n          const text = yield f.text();\n          const lines = text.split(/\\r?\\n/).filter(Boolean);\n          const headers = (lines.shift() || \"\").split(\",\").map(h => h.trim().toLowerCase());\n          for (const line of lines) {\n            const cols = line.split(\",\");\n            const rec = {};\n            headers.forEach((h, i) => {\n              rec[h] = (cols[i] ?? \"\").trim();\n            });\n            const row = {\n              name: rec.name || rec.nombre || \"Unknown\",\n              category: (rec.category || rec.trade || rec.categoria_laboral || \"unknown\").toString(),\n              phone: rec.phone || rec.telefono || \"\",\n              email: rec.email || \"\",\n              address: rec.address || rec.direccion || \"\",\n              city: rec.city || \"\",\n              state: rec.state || \"\",\n              country: rec.country || \"\",\n              lat: rec.lat ? Number(rec.lat) : undefined,\n              lng: rec.lng ? Number(rec.lng) : undefined,\n              source: f.name\n            };\n            _this.rows.push(row);\n          }\n        } else {\n          _this.rows.push({\n            name: f.name.replace(/\\.[^.]+$/, \"\"),\n            category: \"unknown\",\n            source: f.name\n          });\n        }\n      }\n      _this.filtered = [..._this.rows];\n      _this.total = _this.rows.length;\n      _this.refreshChart();\n      input.value = \"\";\n    })();\n  }\n  static {\n    this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 73,\n      vars: 8,\n      consts: [[2, \"padding\", \"16px\"], [2, \"margin-bottom\", \"12px\"], [2, \"font-weight\", \"600\"], [\"type\", \"file\", \"multiple\", \"\", 3, \"change\"], [2, \"font-size\", \"12px\", \"color\", \"#6b7280\", \"margin-top\", \"4px\"], [2, \"margin-top\", \"8px\"], [3, \"click\"], [2, \"margin-left\", \"12px\", \"font-size\", \"12px\", \"color\", \"#6b7280\"], [2, \"max-width\", \"780px\", \"margin\", \"8px 0 16px\"], [\"baseChart\", \"\", 3, \"type\", \"data\", \"options\"], [2, \"margin-top\", \"8px\", \"border-collapse\", \"collapse\", \"width\", \"100%\", \"font-size\", \"14px\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n          i0.ɵɵtext(2, \"XJobs \\u2014 Upload & Browse Workers\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"section\", 1)(4, \"label\", 2);\n          i0.ɵɵtext(5, \"Upload Files\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(6, \"br\");\n          i0.ɵɵelementStart(7, \"input\", 3);\n          i0.ɵɵlistener(\"change\", function AppComponent_Template_input_change_7_listener($event) {\n            return ctx.onPickFiles($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"div\", 4);\n          i0.ɵɵtext(9, \" CSV parsed locally. PDFs/DOCs go to backend \");\n          i0.ɵɵelementStart(10, \"code\");\n          i0.ɵɵtext(11, \"/parse\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(12, \". \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"div\", 5)(14, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_14_listener() {\n            return ctx.clearAll();\n          });\n          i0.ɵɵtext(15, \"Clear All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_16_listener() {\n            return ctx.geocodeMissing();\n          });\n          i0.ɵɵtext(17, \"Geocode Missing (with random jitter)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"span\", 7);\n          i0.ɵɵtext(19);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"section\", 8);\n          i0.ɵɵelement(21, \"canvas\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"h3\");\n          i0.ɵɵtext(23, \"Results\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"table\", 10)(25, \"thead\")(26, \"tr\")(27, \"th\");\n          i0.ɵɵtext(28, \"Photo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"th\");\n          i0.ɵɵtext(30, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"th\");\n          i0.ɵɵtext(32, \"Trade\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"th\");\n          i0.ɵɵtext(34, \"Phone\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"th\");\n          i0.ɵɵtext(36, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"th\");\n          i0.ɵɵtext(38, \"Address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"th\");\n          i0.ɵɵtext(40, \"City\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"th\");\n          i0.ɵɵtext(42, \"State\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(43, \"th\");\n          i0.ɵɵtext(44, \"Country\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(45, \"th\");\n          i0.ɵɵtext(46, \"Lat\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(47, \"th\");\n          i0.ɵɵtext(48, \"Lng\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"th\");\n          i0.ɵɵtext(50, \"Skills\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(51, \"th\");\n          i0.ɵɵtext(52, \"Exp (yrs)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"th\");\n          i0.ɵɵtext(54, \"Certifications\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(55, \"th\");\n          i0.ɵɵtext(56, \"Languages\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"th\");\n          i0.ɵɵtext(58, \"Availability\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(59, \"th\");\n          i0.ɵɵtext(60, \"Rate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"th\");\n          i0.ɵɵtext(62, \"Education\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(63, \"th\");\n          i0.ɵɵtext(64, \"License\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(65, \"th\");\n          i0.ɵɵtext(66, \"Vehicle\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(67, \"th\");\n          i0.ɵɵtext(68, \"Work Eligibility\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(69, \"th\");\n          i0.ɵɵtext(70, \"Source\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(71, \"tbody\");\n          i0.ɵɵtemplate(72, AppComponent_tr_72_Template, 45, 21, \"tr\", 11);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(19);\n          i0.ɵɵtextInterpolate1(\"Total: \", ctx.total, \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"type\", ctx.barChartType)(\"data\", i0.ɵɵpureFunction2(5, _c0, ctx.barChartLabels, ctx.barChartData))(\"options\", ctx.barChartOptions);\n          i0.ɵɵadvance(51);\n          i0.ɵɵproperty(\"ngForOf\", ctx.filtered);\n        }\n      },\n      dependencies: [CommonModule, i1.NgForOf, FormsModule, NgChartsModule, i2.BaseChartDirective],\n      styles: [\"[_nghost-%COMP%]{display:block}\\ntable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding:6px 8px;text-align:left}\\nbutton[_ngcontent-%COMP%]{margin-right:8px}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxhQUFhO0FBQ25CLG1CQUFtQix5QkFBeUIsQ0FBQyxlQUFlLENBQUMsZUFBZTtBQUM1RSxPQUFPLGdCQUFnQiIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0e2Rpc3BsYXk6YmxvY2t9XG50YWJsZSB0aCwgdGFibGUgdGR7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RkZDtwYWRkaW5nOjZweCA4cHg7dGV4dC1hbGlnbjpsZWZ0fVxuYnV0dG9ue21hcmdpbi1yaWdodDo4cHh9XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["CommonModule","FormsModule","NgChartsModule","i0","AppComponent","constructor","name","category","city","country","exp","source","rows","length","data","label","responsive","plugins","legend","display","scales","x","beginAtZero","y","refreshChart","computeCategoryCounts","map","Map","r","k","toLowerCase","set","get","Array","from","entries","sort","a","b","localeCompare","filtered","barChartLabels","e","barChartData","clearAll","total","geocodeMissing","lat","lng","Math","random","onPickFiles","event","input","target","files","value","f","endsWith","text","lines","split","filter","Boolean","headers","shift","h","trim","line","cols","rec","forEach","i","row","nombre","trade","categoria_laboral","toString","phone","telefono","email","address","direccion","state","Number","undefined","push","replace","selectors","standalone","features","decls","vars","consts","template","ctx","styles"],"sourceRoot":"","sources":["/Users/jorgereyes/xjobs/codigo/home-owner/src/app/app.component.ts","/Users/jorgereyes/xjobs/codigo/home-owner/src/app/app.component.html"],"sourcesContent":["import { Component } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport { NgChartsModule } from \"ng2-charts\";\nimport type { ChartConfiguration, ChartType } from \"chart.js\";\nimport \"chart.js/auto\";\n\ntype Row = {\n  name: string;\n  category: string;\n  phone?: string; email?: string;\n  address?: string; city?: string; state?: string; country?: string;\n  lat?: number; lng?: number;\n  skills?: string; exp?: number; certs?: string; langs?: string;\n  availability?: string; rate?: string; education?: string; license?: string; vehicle?: string;\n  eligibility?: string; source?: string;\n};\n\n@Component({\n  selector: \"app-root\",\n  standalone: true,\n  imports: [CommonModule, FormsModule, NgChartsModule],\n  templateUrl: \"./app.component.html\",\n  styleUrls: [\"./app.component.css\"]\n})\nexport class AppComponent {\n  rows: Row[] = [\n    { name:\"Alice\", category:\"electrician\", city:\"Miami\", country:\"US\", exp:3, source:\"seed\" },\n    { name:\"Bob\", category:\"painter\",     city:\"Miami\", country:\"US\", exp:2, source:\"seed\" },\n    { name:\"Cathy\", category:\"other\",      city:\"Miami\", country:\"US\", exp:1, source:\"seed\" },\n    { name:\"Dan\",   category:\"other\",      city:\"Miami\", country:\"US\", exp:4, source:\"seed\" },\n    { name:\"Eva\",   category:\"other\",      city:\"Miami\", country:\"US\", exp:2, source:\"seed\" }\n  ];\n  filtered: Row[] = [...this.rows];\n  total: number = this.rows.length;\n\n  barChartType: ChartType = \"bar\";\n  barChartLabels: string[] = [];\n  barChartData = [{ data: [] as number[], label: \"Workers\" }];\n  barChartOptions: ChartConfiguration[\"options\"] = {\n    responsive: true,\n    plugins: { legend: { display: false } },\n    scales: { x: { beginAtZero: true }, y: { beginAtZero: true } }\n  };\n\n  constructor() { this.refreshChart(); }\n\n  private computeCategoryCounts(rows: Row[]): [string, number][] {\n    const map = new Map<string, number>();\n    for (const r of rows) {\n      const k = (r.category || \"unknown\").toLowerCase();\n      map.set(k, (map.get(k) || 0) + 1);\n    }\n    return Array.from(map.entries()).sort((a,b)=>a[0].localeCompare(b[0]));\n  }\n\n  refreshChart(): void {\n    const entries = this.computeCategoryCounts(this.filtered);\n    this.barChartLabels = entries.map(e => e[0]);\n    this.barChartData = [{ data: entries.map(e => e[1]), label: \"Workers\" }];\n  }\n\n  clearAll(): void {\n    this.rows = [];\n    this.filtered = [];\n    this.total = 0;\n    this.refreshChart();\n  }\n\n  geocodeMissing(): void {\n    for (const r of this.rows) {\n      if (r.lat == null || r.lng == null) {\n        r.lat = 25.7 + (Math.random()-0.5)*0.5;\n        r.lng = -80.3 + (Math.random()-0.5)*0.5;\n      }\n    }\n    this.filtered = [...this.rows];\n    this.total = this.rows.length;\n    this.refreshChart();\n  }\n\n  async onPickFiles(event: Event): Promise<void> {\n    const input = event.target as HTMLInputElement;\n    const files = Array.from(input.files || []);\n    if (!files.length) { input.value = \"\"; return; }\n\n    this.clearAll();\n\n    for (const f of files) {\n      if (f.name.toLowerCase().endsWith(\".csv\")) {\n        const text = await f.text();\n        const lines = text.split(/\\r?\\n/).filter(Boolean);\n        const headers = (lines.shift() || \"\").split(\",\").map(h => h.trim().toLowerCase());\n        for (const line of lines) {\n          const cols = line.split(\",\");\n          const rec: any = {};\n          headers.forEach((h, i) => { rec[h] = (cols[i] ?? \"\").trim(); });\n          const row: Row = {\n            name: rec.name || rec.nombre || \"Unknown\",\n            category: (rec.category || rec.trade || rec.categoria_laboral || \"unknown\").toString(),\n            phone: rec.phone || rec.telefono || \"\",\n            email: rec.email || \"\",\n            address: rec.address || rec.direccion || \"\",\n            city: rec.city || \"\",\n            state: rec.state || \"\",\n            country: rec.country || \"\",\n            lat: rec.lat ? Number(rec.lat) : undefined,\n            lng: rec.lng ? Number(rec.lng) : undefined,\n            source: f.name\n          };\n          this.rows.push(row);\n        }\n      } else {\n        this.rows.push({ name: f.name.replace(/\\.[^.]+$/, \"\"), category: \"unknown\", source: f.name });\n      }\n    }\n\n    this.filtered = [...this.rows];\n    this.total = this.rows.length;\n    this.refreshChart();\n    input.value = \"\";\n  }\n}\n","<div style=\"padding:16px\">\n  <h1>XJobs — Upload & Browse Workers</h1>\n\n  <section style=\"margin-bottom:12px;\">\n    <label style=\"font-weight:600;\">Upload Files</label><br />\n    <input type=\"file\" multiple (change)=\"onPickFiles($event)\" />\n    <div style=\"font-size:12px;color:#6b7280;margin-top:4px;\">\n      CSV parsed locally. PDFs/DOCs go to backend <code>/parse</code>.\n    </div>\n    <div style=\"margin-top:8px;\">\n      <button (click)=\"clearAll()\">Clear All</button>\n      <button (click)=\"geocodeMissing()\">Geocode Missing (with random jitter)</button>\n      <span style=\"margin-left:12px;font-size:12px;color:#6b7280;\">Total: {{ total }}</span>\n    </div>\n  </section>\n\n  <section style=\"max-width:780px;margin:8px 0 16px;\">\n    <canvas baseChart\n            [type]=\"barChartType\"\n            [data]=\"{ labels: barChartLabels, datasets: barChartData }\"\n            [options]=\"barChartOptions\">\n    </canvas>\n  </section>\n\n  <h3>Results</h3>\n  <table style=\"margin-top:8px;border-collapse:collapse;width:100%;font-size:14px;\">\n    <thead>\n      <tr>\n        <th>Photo</th><th>Name</th><th>Trade</th><th>Phone</th><th>Email</th>\n        <th>Address</th><th>City</th><th>State</th><th>Country</th>\n        <th>Lat</th><th>Lng</th><th>Skills</th><th>Exp (yrs)</th>\n        <th>Certifications</th><th>Languages</th><th>Availability</th>\n        <th>Rate</th><th>Education</th><th>License</th><th>Vehicle</th>\n        <th>Work Eligibility</th><th>Source</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let r of filtered\">\n        <td>—</td>\n        <td>{{r.name}}</td>\n        <td>{{r.category}}</td>\n        <td>{{r.phone || \"—\"}}</td>\n        <td>{{r.email || \"—\"}}</td>\n        <td>{{r.address || \"—\"}}</td>\n        <td>{{r.city || \"—\"}}</td>\n        <td>{{r.state || \"—\"}}</td>\n        <td>{{r.country || \"—\"}}</td>\n        <td>{{r.lat ?? \"—\"}}</td>\n        <td>{{r.lng ?? \"—\"}}</td>\n        <td>{{r.skills || \"—\"}}</td>\n        <td>{{r.exp ?? \"—\"}}</td>\n        <td>{{r.certs || \"—\"}}</td>\n        <td>{{r.langs || \"—\"}}</td>\n        <td>{{r.availability || \"—\"}}</td>\n        <td>{{r.rate || \"—\"}}</td>\n        <td>{{r.education || \"—\"}}</td>\n        <td>{{r.license || \"—\"}}</td>\n        <td>{{r.vehicle || \"—\"}}</td>\n        <td>{{r.eligibility || \"—\"}}</td>\n        <td>{{r.source || \"—\"}}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}