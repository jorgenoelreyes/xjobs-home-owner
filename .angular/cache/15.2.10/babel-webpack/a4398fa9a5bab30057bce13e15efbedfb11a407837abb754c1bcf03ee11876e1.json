{"ast":null,"code":"import _asyncToGenerator from \"/Users/jorgereyes/xjobs/codigo/home-owner/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as Papa from 'papaparse';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction AppComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 8);\n    i0.ɵɵtext(1, \"Total parsed: \");\n    i0.ɵɵelementStart(2, \"b\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.rows.length);\n  }\n}\nfunction AppComponent_table_12_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.firstName || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.lastName || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.address || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.email || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.phone || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.profession || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.trade || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.skills || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.industry || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.geolocation || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r3.source || \"\\u2014\");\n  }\n}\nfunction AppComponent_table_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 9)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"First Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Last Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Email Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Phone Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Profession\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Trade\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\");\n    i0.ɵɵtext(18, \"Skills\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"th\");\n    i0.ɵɵtext(20, \"Industry\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"th\");\n    i0.ɵɵtext(22, \"Geolocation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"th\");\n    i0.ɵɵtext(24, \"Source\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"tbody\");\n    i0.ɵɵtemplate(26, AppComponent_table_12_tr_26_Template, 23, 11, \"tr\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(26);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.filtered);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    labels: a0,\n    datasets: a1\n  };\n};\nexport class AppComponent {\n  constructor(http) {\n    this.http = http;\n    this.title = 'XJobs – Upload & Browse Workers';\n    this.rows = [];\n    this.filtered = [];\n    this.activeFilter = null;\n    this.total = 0;\n    this.barChartType = 'bar';\n    this.barChartLabels = [];\n    this.barChartData = [{\n      data: [],\n      label: 'Workers'\n    }];\n    this.barChartOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        legend: {\n          display: false\n        },\n        tooltip: {\n          enabled: true\n        }\n      },\n      scales: {\n        x: {\n          grid: {\n            color: 'rgba(0,0,0,0.06)'\n          },\n          ticks: {\n            color: '#555'\n          }\n        },\n        y: {\n          beginAtZero: true,\n          grid: {\n            color: 'rgba(0,0,0,0.06)'\n          },\n          ticks: {\n            color: '#555'\n          }\n        }\n      }\n    };\n  }\n  clearAll() {\n    this.rows = [];\n    this.filtered = [];\n    this.total = 0;\n    this.refreshChart();\n  }\n  refreshChart() {\n    const counts = {};\n    for (const r of this.filtered) {\n      const cat = (r.trade || r.profession || 'unknown').toLowerCase();\n      counts[cat] = (counts[cat] || 0) + 1;\n    }\n    const entries = Object.entries(counts).sort((a, b) => a[0].localeCompare(b[0]));\n    this.barChartLabels = entries.map(e => e[0]);\n    const values = entries.map(e => e[1]);\n    const max = Math.max(...values, 5);\n    this.barChartData = [{\n      data: values,\n      label: 'Workers'\n    }];\n    if (this.barChartOptions.scales?.y) {\n      this.barChartOptions.scales.y.max = max;\n      this.barChartOptions.scales.y.suggestedMax = max;\n    }\n  }\n  onPickFiles(ev) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const input = ev.target;\n      const files = Array.from(input.files || []);\n      if (!files.length) return;\n      const mode = confirm('Add to current batch? Click Cancel to replace.') ? 'add' : 'replace';\n      if (mode === 'replace') _this.clearAll();\n      for (const f of files) {\n        const text = yield f.text();\n        const parsed = Papa.parse(text, {\n          header: true\n        }).data;\n        for (const row of parsed) {\n          const r = {\n            firstName: row['First Name'] || row['Name']?.split(' ')[0] || '',\n            lastName: row['Last Name'] || row['Name']?.split(' ')[1] || '',\n            address: row['Address'] || '',\n            email: row['Email'] || '',\n            phone: row['Phone'] || '',\n            profession: row['Profession'] || '',\n            trade: row['Trade'] || '',\n            skills: row['Skills'] || '',\n            industry: row['Industry'] || '',\n            geolocation: row['Location'] || ''\n          };\n          _this.rows.push(r);\n        }\n      }\n      _this.filtered = [..._this.rows];\n      _this.total = _this.rows.length;\n      _this.refreshChart();\n    })();\n  }\n  static {\n    this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 13,\n      vars: 9,\n      consts: [[2, \"padding\", \"20px\", \"font-family\", \"Arial, Helvetica, sans-serif\"], [2, \"display\", \"flex\", \"gap\", \"12px\", \"align-items\", \"center\", \"flex-wrap\", \"wrap\", \"margin-bottom\", \"12px\"], [\"id\", \"u\", \"type\", \"file\", \"multiple\", \"\", \"accept\", \".csv,.pdf,.txt,.doc,.docx,.rtf,.json\", 3, \"change\"], [3, \"click\"], [\"style\", \"color:#6b7280;\", 4, \"ngIf\"], [2, \"height\", \"360px\", \"width\", \"100%\", \"margin\", \"0 auto\"], [\"baseChart\", \"\", 3, \"data\", \"options\", \"type\"], [\"border\", \"1\", \"style\", \"margin-top: 20px; width: 100%; border-collapse: collapse;\", 4, \"ngIf\"], [2, \"color\", \"#6b7280\"], [\"border\", \"1\", 2, \"margin-top\", \"20px\", \"width\", \"100%\", \"border-collapse\", \"collapse\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"input\", 2);\n          i0.ɵɵlistener(\"change\", function AppComponent_Template_input_change_4_listener($event) {\n            return ctx.onPickFiles($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_5_listener() {\n            return ctx.clearFilter();\n          });\n          i0.ɵɵtext(6, \"Clear Filter\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_7_listener() {\n            return ctx.clearAll();\n          });\n          i0.ɵɵtext(8, \"Clear All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(9, AppComponent_span_9_Template, 4, 1, \"span\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 5);\n          i0.ɵɵelement(11, \"canvas\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(12, AppComponent_table_12_Template, 27, 1, \"table\", 7);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.title);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.rows == null ? null : ctx.rows.length);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(6, _c0, ctx.barChartLabels, ctx.barChartData))(\"options\", ctx.barChartOptions)(\"type\", ctx.barChartType);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.filtered.length);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\t\\\"use strict\\\";\\n \\t\\n \\t\\n })()[_ngcontent-%COMP%]\\n;\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["Papa","i0","AppComponent","constructor","http","data","label","responsive","maintainAspectRatio","plugins","legend","display","tooltip","enabled","scales","x","grid","color","ticks","y","beginAtZero","clearAll","rows","filtered","total","refreshChart","counts","r","cat","trade","profession","toLowerCase","entries","Object","sort","a","b","localeCompare","barChartLabels","map","e","values","max","Math","barChartData","barChartOptions","suggestedMax","onPickFiles","ev","input","target","files","Array","from","length","mode","confirm","f","text","parsed","parse","header","row","firstName","split","lastName","address","email","phone","skills","industry","geolocation","push","selectors","standalone","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/jorgereyes/xjobs/codigo/home-owner/src/app/app.component.ts","/Users/jorgereyes/xjobs/codigo/home-owner/src/app/app.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { NgChartsModule } from 'ng2-charts';\nimport { ChartConfiguration, ChartType } from 'chart.js';\nimport * as Papa from 'papaparse';\n\ntype ResumeRow = {\n  firstName: string;\n  lastName?: string;\n  address?: string;\n  email?: string;\n  phone?: string;\n  profession?: string;\n  trade?: string;\n  skills?: string;\n  industry?: string;\n  geolocation?: string;\n  source?: string;\n};\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CommonModule, HttpClientModule, NgChartsModule],\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'XJobs – Upload & Browse Workers';\n  rows: ResumeRow[] = [];\n  filtered: ResumeRow[] = [];\n  activeFilter: string | null = null;\n  total = 0;\n\n  public barChartType: ChartType = 'bar';\n  public barChartLabels: string[] = [];\n  public barChartData: any[] = [{ data: [], label: 'Workers' }];\n  public barChartOptions: ChartConfiguration['options'] = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: { legend: { display: false }, tooltip: { enabled: true } },\n    scales: {\n      x: { grid: { color: 'rgba(0,0,0,0.06)' }, ticks: { color: '#555' } },\n      y: { beginAtZero: true, grid: { color: 'rgba(0,0,0,0.06)' }, ticks: { color: '#555' } }\n    }\n  };\n\n  constructor(private http: HttpClient) {}\n\n  clearAll() { this.rows = []; this.filtered = []; this.total = 0; this.refreshChart(); }\n\n  refreshChart() {\n    const counts: Record<string, number> = {};\n    for (const r of this.filtered) {\n      const cat = (r.trade || r.profession || 'unknown').toLowerCase();\n      counts[cat] = (counts[cat] || 0) + 1;\n    }\n    const entries = Object.entries(counts).sort((a,b)=>a[0].localeCompare(b[0]));\n    this.barChartLabels = entries.map(e => e[0]);\n    const values = entries.map(e => e[1]);\n    const max = Math.max(...values, 5);\n    this.barChartData = [{ data: values, label: 'Workers' }];\n    if ((this.barChartOptions.scales as any)?.y) {\n      (this.barChartOptions.scales as any).y.max = max;\n      (this.barChartOptions.scales as any).y.suggestedMax = max;\n    }\n  }\n\n  async onPickFiles(ev: Event) {\n    const input = ev.target as HTMLInputElement;\n    const files = Array.from(input.files || []);\n    if (!files.length) return;\n    const mode = confirm('Add to current batch? Click Cancel to replace.') ? 'add' : 'replace';\n    if (mode === 'replace') this.clearAll();\n\n    for (const f of files) {\n      const text = await f.text();\n      const parsed = Papa.parse(text, { header: true }).data as any[];\n      for (const row of parsed) {\n        const r: ResumeRow = {\n          firstName: row['First Name'] || row['Name']?.split(' ')[0] || '',\n          lastName: row['Last Name'] || row['Name']?.split(' ')[1] || '',\n          address: row['Address'] || '',\n          email: row['Email'] || '',\n          phone: row['Phone'] || '',\n          profession: row['Profession'] || '',\n          trade: row['Trade'] || '',\n          skills: row['Skills'] || '',\n          industry: row['Industry'] || '',\n          geolocation: row['Location'] || ''\n        };\n        this.rows.push(r);\n      }\n    }\n\n    this.filtered = [...this.rows];\n    this.total = this.rows.length;\n    this.refreshChart();\n  }\n}\n","<div style=\"padding:20px; font-family: Arial, Helvetica, sans-serif;\">\n  <h2>{{ title }}</h2>\n\n  <div style=\"display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:12px;\">\n    <input id=\"u\" type=\"file\" multiple accept=\".csv,.pdf,.txt,.doc,.docx,.rtf,.json\" (change)=\"onPickFiles($event)\" />\n    <button (click)=\"clearFilter()\">Clear Filter</button>\n    <button (click)=\"clearAll()\">Clear All</button>\n    <span *ngIf=\"rows?.length\" style=\"color:#6b7280;\">Total parsed: <b>{{ rows.length }}</b></span>\n  </div>\n\n  <div style=\"height:360px; width:100%; margin:0 auto;\">\n    <canvas\n      baseChart\n      [data]=\"{ labels: barChartLabels, datasets: barChartData }\"\n      [options]=\"barChartOptions\"\n      [type]=\"barChartType\">\n    </canvas>\n  </div>\n\n  <table *ngIf=\"filtered.length\" border=\"1\" style=\"margin-top: 20px; width: 100%; border-collapse: collapse;\">\n    <thead>\n      <tr>\n        <th>First Name</th>\n        <th>Last Name</th>\n        <th>Address</th>\n        <th>Email Address</th>\n        <th>Phone Number</th>\n        <th>Profession</th>\n        <th>Trade</th>\n        <th>Skills</th>\n        <th>Industry</th>\n        <th>Geolocation</th>\n        <th>Source</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let r of filtered\">\n        <td>{{ r.firstName || '—' }}</td>\n        <td>{{ r.lastName || '—' }}</td>\n        <td>{{ r.address || '—' }}</td>\n        <td>{{ r.email || '—' }}</td>\n        <td>{{ r.phone || '—' }}</td>\n        <td>{{ r.profession || '—' }}</td>\n        <td>{{ r.trade || '—' }}</td>\n        <td>{{ r.skills || '—' }}</td>\n        <td>{{ r.industry || '—' }}</td>\n        <td>{{ r.geolocation || '—' }}</td>\n        <td>{{ r.source || '—' }}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}