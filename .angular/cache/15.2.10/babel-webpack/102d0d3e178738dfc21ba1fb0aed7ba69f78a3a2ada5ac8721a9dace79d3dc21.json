{"ast":null,"code":"import _asyncToGenerator from \"/Users/jorgereyes/xjobs/codigo/home-owner/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Chart, registerables } from 'chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"barChart\"];\nfunction UploadCvsComponent_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.lastMessage);\n  }\n}\nconst _c1 = function (a0, a1) {\n  return {\n    backgroundColor: a0,\n    color: a1\n  };\n};\nfunction UploadCvsComponent_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function UploadCvsComponent_button_23_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const cat_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.toggleFilter(cat_r7));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(2, _c1, ctx_r1.selectedCategoria === cat_r7 ? \"#111827\" : \"#f3f4f6\", ctx_r1.selectedCategoria === cat_r7 ? \"#fff\" : \"#111827\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cat_r7, \" \");\n  }\n}\nfunction UploadCvsComponent_tr_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r10.nombre || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r10.telefono || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r10.email || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r10.direccion || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r10.categoria_laboral || \"otro\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r10.fuente || \"Manual\");\n  }\n}\nfunction UploadCvsComponent_tr_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 27);\n    i0.ɵɵtext(2, \"No hay filas para mostrar.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UploadCvsComponent_section_49_li_4_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 32);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const f_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\u2013 \", f_r12.reason, \"\");\n  }\n}\nfunction UploadCvsComponent_section_49_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"span\", 30);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, UploadCvsComponent_section_49_li_4_span_4_Template, 2, 1, \"span\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const f_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", f_r12.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"(\", f_r12.kind, \")\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", f_r12.reason);\n  }\n}\nfunction UploadCvsComponent_section_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 28)(1, \"h2\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 29);\n    i0.ɵɵtemplate(4, UploadCvsComponent_section_49_li_4_Template, 5, 3, \"li\", 21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Archivos sin parsear (\", ctx_r5.unparsedFiles.length, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.unparsedFiles);\n  }\n}\nfunction UploadCvsComponent_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"div\", 34)(2, \"h3\", 35);\n    i0.ɵɵtext(3, \"Paste CSV/TSV or one name per line\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"textarea\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function UploadCvsComponent_div_50_Template_textarea_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.pasteText = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 37)(6, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function UploadCvsComponent_div_50_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.closePaste());\n    });\n    i0.ɵɵtext(7, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function UploadCvsComponent_div_50_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.parsePasted());\n    });\n    i0.ɵɵtext(9, \"Parse & Add\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.pasteText);\n  }\n}\nChart.register(...registerables);\nexport class UploadCvsComponent {\n  constructor() {\n    // UI state\n    this.showPaste = false;\n    this.pasteText = '';\n    this.sourceLabel = 'Manual';\n    this.busy = false;\n    this.lastMessage = '';\n    // Data\n    this.rows = [];\n    this.unparsedFiles = [];\n    this.selectedCategoria = null;\n    this.CANON = ['plomero', 'carpintero', 'pintor', 'electricista', 'soldador', 'albañil', 'techador', 'climatizacion', 'paisajista', 'mecanico', 'obrero_general', 'otro'];\n  }\n  ngAfterViewInit() {\n    queueMicrotask(() => {\n      this.buildChart();\n      this.refreshChart();\n    });\n  }\n  // -------- File handling (client-side parse) --------\n  onFilesSelected(ev) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const input = ev.target;\n      const files = Array.from(input?.files ?? []);\n      if (input) input.value = '';\n      if (!files.length) return;\n      _this.busy = true;\n      _this.lastMessage = '';\n      const added = [];\n      const unparsed = [];\n      for (const f of files) {\n        const ext = _this.extOf(f.name).toLowerCase();\n        try {\n          if (ext === 'csv' || ext === 'tsv') {\n            const text = yield f.text();\n            const parsed = _this.parseDelimitedText(text, _this.sourceLabel || 'Archivo');\n            added.push(...parsed);\n          } else if (ext === 'txt') {\n            const text = yield f.text();\n            const parsed = _this.parseTxtLines(text, _this.sourceLabel || 'Archivo');\n            added.push(...parsed);\n          } else if (ext === 'pdf' || ext === 'doc' || ext === 'docx') {\n            unparsed.push({\n              name: f.name,\n              kind: _this.extOf(f.name),\n              reason: 'Use copy–paste for PDFs/DOCs'\n            });\n          } else {\n            unparsed.push({\n              name: f.name,\n              kind: _this.extOf(f.name),\n              reason: 'Unsupported type'\n            });\n          }\n        } catch (e) {\n          console.error('Read/parse failed:', f.name, e);\n          unparsed.push({\n            name: f.name,\n            kind: _this.extOf(f.name),\n            reason: 'Read/parse error'\n          });\n        }\n      }\n      if (added.length) {\n        _this.rows = _this.rows.concat(added);\n        _this.refreshChart();\n        _this.lastMessage = `Parsed ${added.length} row(s) from ${files.length} file(s).`;\n      }\n      if (unparsed.length) _this.unparsedFiles.push(...unparsed);\n      _this.busy = false;\n    })();\n  }\n  parseDelimitedText(raw, fuente) {\n    const lines = (raw || '').split(/\\r?\\n/).filter(l => l.trim().length > 0);\n    if (!lines.length) return [];\n    const sep = lines[0].includes('\\t') ? '\\t' : ',';\n    const headers = lines.shift().split(sep).map(h => h.trim().toLowerCase());\n    const out = [];\n    for (const line of lines) {\n      const cols = line.split(sep).map(c => c.trim());\n      const obj = {};\n      headers.forEach((h, i) => obj[h] = cols[i] ?? '');\n      out.push(this.normalize(obj, fuente));\n    }\n    return out;\n  }\n  parseTxtLines(raw, fuente) {\n    return (raw || '').split(/\\r?\\n/).map(s => s.trim()).filter(Boolean).map(nombre => this.normalize({\n      nombre\n    }, fuente));\n  }\n  // -------- Filters & paste modal --------\n  get visibleRows() {\n    if (!this.selectedCategoria) return this.rows;\n    return this.rows.filter(r => (r.categoria_laboral || 'otro') === this.selectedCategoria);\n  }\n  toggleFilter(cat) {\n    this.selectedCategoria = this.selectedCategoria === cat ? null : cat;\n    this.refreshChart();\n  }\n  clearFilter() {\n    this.selectedCategoria = null;\n    this.refreshChart();\n  }\n  closePaste() {\n    this.showPaste = false;\n  }\n  parsePasted() {\n    const raw = this.pasteText || '';\n    if (!raw.trim()) {\n      this.closePaste();\n      return;\n    }\n    let parsed = [];\n    try {\n      parsed = this.parseDelimitedText(raw, this.sourceLabel || 'Manual');\n      if (!parsed.length) throw new Error('fallback');\n    } catch {\n      parsed = this.parseTxtLines(raw, this.sourceLabel || 'Manual');\n    }\n    if (parsed.length) {\n      this.rows = this.rows.concat(parsed);\n      this.refreshChart();\n      this.lastMessage = `Parsed ${parsed.length} row(s) from paste.`;\n    }\n    this.pasteText = '';\n    this.sourceLabel = 'Manual';\n    this.closePaste();\n  }\n  // -------- Normalization --------\n  normalize(r, fuente = 'Manual') {\n    const slug = s => (s || '').toLowerCase().replace(/\\s+/g, '_').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n    const toCanon = val => {\n      const s = slug(val);\n      if (!s) return 'otro';\n      if (s.includes('plom')) return 'plomero';\n      if (s.includes('carp')) return 'carpintero';\n      if (s.includes('pint')) return 'pintor';\n      if (s.includes('elect')) return 'electricista';\n      if (s.includes('sold')) return 'soldador';\n      if (s.includes('alban') || s.includes('albañ')) return 'albañil';\n      if (s.includes('tech') || s.includes('roof')) return 'techador';\n      if (s.includes('clima') || s.includes('hvac')) return 'climatizacion';\n      if (s.includes('paisaj') || s.includes('land')) return 'paisajista';\n      if (s.includes('mecan')) return 'mecanico';\n      if (s.includes('obrer') || s.includes('general')) return 'obrero_general';\n      return this.CANON.includes(s) ? s : 'otro';\n    };\n    const nombre = r?.['nombre'] ?? r?.['name'] ?? r?.['full name'] ?? r?.['full_name'] ?? r?.['nombres y apellidos'] ?? '';\n    const telefono = r?.['telefono'] ?? r?.['phone'] ?? r?.['celular'] ?? r?.['mobile'] ?? '';\n    const email = r?.['email'] ?? r?.['correo'] ?? r?.['mail'] ?? '';\n    const direccion = r?.['direccion'] ?? r?.['address'] ?? '';\n    const catRaw = r?.['categoria_laboral'] ?? r?.['categoria'] ?? r?.['category'] ?? r?.['ocupacion'] ?? r?.['job'] ?? '';\n    return {\n      nombre: (nombre || '').toString(),\n      telefono: (telefono || '').toString(),\n      email: (email || '').toString(),\n      direccion: (direccion || '').toString(),\n      categoria_laboral: toCanon(catRaw),\n      fuente\n    };\n  }\n  extOf(name) {\n    const m = (name || '').match(/\\.([^.]+)$/);\n    return (m?.[1] || '').toUpperCase();\n  }\n  // -------- Chart --------\n  buildChart() {\n    if (!this.barChartRef?.nativeElement) return;\n    const ctx = this.barChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n    const cfg = {\n      type: 'bar',\n      data: {\n        labels: this.CANON,\n        datasets: [{\n          label: 'Recursos',\n          data: new Array(this.CANON.length).fill(0)\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    };\n    if (this.chart) this.chart.destroy();\n    this.chart = new Chart(ctx, cfg);\n  }\n  refreshChart() {\n    if (!this.chart) return;\n    const counts = this.CANON.reduce((acc, c) => {\n      acc[c] = 0;\n      return acc;\n    }, {});\n    const src = this.selectedCategoria ? this.visibleRows : this.rows;\n    for (const r of src) {\n      const key = r.categoria_laboral || 'otro';\n      counts[key] = (counts[key] || 0) + 1;\n    }\n    this.chart.data.datasets[0].data = this.CANON.map(c => counts[c] || 0);\n    this.chart.update();\n  }\n  static {\n    this.ɵfac = function UploadCvsComponent_Factory(t) {\n      return new (t || UploadCvsComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UploadCvsComponent,\n      selectors: [[\"app-upload-cvs\"]],\n      viewQuery: function UploadCvsComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.barChartRef = _t.first);\n        }\n      },\n      decls: 51,\n      vars: 9,\n      consts: [[1, \"wrap\", 2, \"padding\", \"20px\"], [1, \"brand\", 2, \"display\", \"flex\", \"align-items\", \"center\", \"gap\", \"12px\", \"margin-bottom\", \"12px\"], [2, \"margin\", \"0\", \"font-size\", \"22px\"], [1, \"panel\", 2, \"border\", \"1px solid #e5e7eb\", \"border-radius\", \"10px\", \"padding\", \"12px\", \"margin-bottom\", \"12px\"], [2, \"margin\", \"0 0 8px 0\", \"font-size\", \"16px\"], [\"style\", \"margin:4px 0 10px 0;color:#374151;\", 4, \"ngIf\"], [2, \"display\", \"flex\", \"gap\", \"8px\", \"align-items\", \"center\"], [\"type\", \"file\", \"multiple\", \"\", \"accept\", \".csv,.tsv,.txt,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\", 3, \"change\"], [\"type\", \"button\", 3, \"click\"], [2, \"display\", \"flex\", \"align-items\", \"center\", \"gap\", \"6px\", \"margin-left\", \"auto\"], [\"type\", \"text\", 2, \"padding\", \"6px 8px\", \"border\", \"1px solid #d1d5db\", \"border-radius\", \"6px\", \"min-width\", \"160px\", 3, \"ngModel\", \"ngModelChange\"], [2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\", \"gap\", \"8px\", \"margin-bottom\", \"8px\"], [2, \"margin\", \"0\", \"font-size\", \"16px\"], [\"type\", \"button\", 3, \"disabled\", \"click\"], [2, \"display\", \"flex\", \"flex-wrap\", \"wrap\", \"gap\", \"6px\", \"margin-bottom\", \"10px\"], [\"type\", \"button\", \"style\", \"border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;cursor:pointer;\", 3, \"ngStyle\", \"click\", 4, \"ngFor\", \"ngForOf\"], [2, \"height\", \"280px\", \"position\", \"relative\", \"border\", \"1px dashed #e5e7eb\", \"border-radius\", \"8px\", \"padding\", \"6px\"], [\"barChart\", \"\"], [2, \"overflow\", \"auto\", \"border\", \"1px solid #e5e7eb\", \"border-radius\", \"8px\"], [2, \"width\", \"100%\", \"border-collapse\", \"collapse\", \"font-size\", \"14px\"], [2, \"background\", \"#f9fafb\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"class\", \"panel\", \"style\", \"border:1px solid #e5e7eb;border-radius:10px;padding:12px;margin:12px 0;\", 4, \"ngIf\"], [\"style\", \"position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;z-index:50;\", 4, \"ngIf\"], [2, \"margin\", \"4px 0 10px 0\", \"color\", \"#374151\"], [\"type\", \"button\", 2, \"border\", \"1px solid #e5e7eb\", \"border-radius\", \"999px\", \"padding\", \"6px 10px\", \"cursor\", \"pointer\", 3, \"ngStyle\", \"click\"], [\"colspan\", \"6\", 2, \"text-align\", \"center\", \"color\", \"#6b7280\"], [1, \"panel\", 2, \"border\", \"1px solid #e5e7eb\", \"border-radius\", \"10px\", \"padding\", \"12px\", \"margin\", \"12px 0\"], [2, \"margin\", \"0\", \"padding-left\", \"18px\"], [2, \"color\", \"#6b7280\"], [\"style\", \"color:#9ca3af;\", 4, \"ngIf\"], [2, \"color\", \"#9ca3af\"], [2, \"position\", \"fixed\", \"inset\", \"0\", \"background\", \"rgba(0,0,0,0.45)\", \"display\", \"flex\", \"align-items\", \"center\", \"justify-content\", \"center\", \"z-index\", \"50\"], [2, \"background\", \"white\", \"max-width\", \"720px\", \"width\", \"92vw\", \"border-radius\", \"12px\", \"padding\", \"16px\"], [2, \"margin\", \"0 0 8px 0\"], [\"rows\", \"10\", 2, \"width\", \"100%\", \"padding\", \"10px\", \"border\", \"1px solid #d1d5db\", \"border-radius\", \"8px\", \"font-family\", \"monospace\", 3, \"ngModel\", \"ngModelChange\"], [2, \"display\", \"flex\", \"gap\", \"8px\", \"justify-content\", \"flex-end\", \"margin-top\", \"8px\"]],\n      template: function UploadCvsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"h1\", 2);\n          i0.ɵɵtext(3, \"Xjobs \\u2014 CV Scanner\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"section\", 3)(5, \"h2\", 4);\n          i0.ɵɵtext(6, \"Upload files\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(7, UploadCvsComponent_p_7_Template, 2, 1, \"p\", 5);\n          i0.ɵɵelementStart(8, \"div\", 6)(9, \"input\", 7);\n          i0.ɵɵlistener(\"change\", function UploadCvsComponent_Template_input_change_9_listener($event) {\n            return ctx.onFilesSelected($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function UploadCvsComponent_Template_button_click_10_listener() {\n            return ctx.showPaste = true;\n          });\n          i0.ɵɵtext(11, \"Paste rows\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"label\", 9)(13, \"span\");\n          i0.ɵɵtext(14, \"Source label\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"input\", 10);\n          i0.ɵɵlistener(\"ngModelChange\", function UploadCvsComponent_Template_input_ngModelChange_15_listener($event) {\n            return ctx.sourceLabel = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(16, \"section\", 3)(17, \"div\", 11)(18, \"h2\", 12);\n          i0.ɵɵtext(19, \"Categor\\u00EDas\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function UploadCvsComponent_Template_button_click_20_listener() {\n            return ctx.clearFilter();\n          });\n          i0.ɵɵtext(21, \"Clear filter\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 14);\n          i0.ɵɵtemplate(23, UploadCvsComponent_button_23_Template, 2, 5, \"button\", 15);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"div\", 16);\n          i0.ɵɵelement(25, \"canvas\", null, 17);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"section\", 3)(28, \"h2\", 4);\n          i0.ɵɵtext(29);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 18)(31, \"table\", 19)(32, \"thead\", 20)(33, \"tr\")(34, \"th\");\n          i0.ɵɵtext(35, \"Nombre\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"th\");\n          i0.ɵɵtext(37, \"Tel\\u00E9fono\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"th\");\n          i0.ɵɵtext(39, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"th\");\n          i0.ɵɵtext(41, \"Direcci\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"th\");\n          i0.ɵɵtext(43, \"Categor\\u00EDa\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(44, \"th\");\n          i0.ɵɵtext(45, \"Fuente\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(46, \"tbody\");\n          i0.ɵɵtemplate(47, UploadCvsComponent_tr_47_Template, 13, 6, \"tr\", 21);\n          i0.ɵɵtemplate(48, UploadCvsComponent_tr_48_Template, 3, 0, \"tr\", 22);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(49, UploadCvsComponent_section_49_Template, 5, 2, \"section\", 23);\n          i0.ɵɵtemplate(50, UploadCvsComponent_div_50_Template, 10, 1, \"div\", 24);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.lastMessage);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngModel\", ctx.sourceLabel);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"disabled\", !ctx.selectedCategoria);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.CANON);\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"Resultados (\", ctx.visibleRows.length, \")\");\n          i0.ɵɵadvance(18);\n          i0.ɵɵproperty(\"ngForOf\", ctx.visibleRows);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.visibleRows.length);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.unparsedFiles.length);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showPaste);\n        }\n      },\n      dependencies: [i1.NgForOf, i1.NgIf, i1.NgStyle, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["Chart","registerables","i0","register","UploadCvsComponent","constructor","ngAfterViewInit","queueMicrotask","buildChart","refreshChart","onFilesSelected","ev","input","target","files","Array","from","value","length","busy","lastMessage","added","unparsed","f","ext","extOf","name","toLowerCase","text","parsed","parseDelimitedText","sourceLabel","push","parseTxtLines","kind","reason","e","console","error","rows","concat","unparsedFiles","raw","fuente","lines","split","filter","l","trim","sep","includes","headers","shift","map","h","out","line","cols","c","obj","forEach","i","normalize","s","Boolean","nombre","visibleRows","selectedCategoria","r","categoria_laboral","toggleFilter","cat","clearFilter","closePaste","showPaste","parsePasted","pasteText","Error","slug","replace","toCanon","val","CANON","telefono","email","direccion","catRaw","toString","m","match","toUpperCase","barChartRef","nativeElement","ctx","getContext","cfg","type","data","labels","datasets","label","fill","options","responsive","maintainAspectRatio","scales","y","beginAtZero","chart","destroy","counts","reduce","acc","src","key","update","selectors","viewQuery"],"sourceRoot":"","sources":["/Users/jorgereyes/xjobs/codigo/home-owner/src/app/components/upload-cvs/upload-cvs.component.ts","/Users/jorgereyes/xjobs/codigo/home-owner/src/app/components/upload-cvs/upload-cvs.component.html"],"sourcesContent":["import { AfterViewInit, Component, ElementRef, ViewChild } from '@angular/core';\nimport { Chart, ChartConfiguration, registerables } from 'chart.js';\nChart.register(...registerables);\n\nexport interface WorkerRow {\n  nombre: string;\n  telefono: string;\n  email: string;\n  direccion: string;\n  categoria_laboral: string;\n  fuente: string;\n}\n\n@Component({\n  selector: 'app-upload-cvs',\n  templateUrl: './upload-cvs.component.html',\n  styleUrls: ['./upload-cvs.component.scss']\n})\nexport class UploadCvsComponent implements AfterViewInit {\n  @ViewChild('barChart', { static: false }) barChartRef!: ElementRef<HTMLCanvasElement>;\n\n  // UI state\n  showPaste = false;\n  pasteText = '';\n  sourceLabel = 'Manual';\n  busy = false;\n  lastMessage = '';\n\n  // Data\n  rows: WorkerRow[] = [];\n  unparsedFiles: { name: string; kind: string; reason?: string }[] = [];\n  selectedCategoria: string | null = null;\n\n  // Chart\n  private chart?: Chart;\n  readonly CANON = [\n    'plomero','carpintero','pintor','electricista','soldador','albañil',\n    'techador','climatizacion','paisajista','mecanico','obrero_general','otro'\n  ];\n\n  ngAfterViewInit(): void {\n    queueMicrotask(() => {\n      this.buildChart();\n      this.refreshChart();\n    });\n  }\n\n  // -------- File handling (client-side parse) --------\n  async onFilesSelected(ev: Event): Promise<void> {\n    const input = ev.target as HTMLInputElement | null;\n    const files = Array.from(input?.files ?? []);\n    if (input) input.value = '';\n    if (!files.length) return;\n\n    this.busy = true;\n    this.lastMessage = '';\n    const added: WorkerRow[] = [];\n    const unparsed: { name: string; kind: string; reason?: string }[] = [];\n\n    for (const f of files) {\n      const ext = this.extOf(f.name).toLowerCase();\n      try {\n        if (ext === 'csv' || ext === 'tsv') {\n          const text = await f.text();\n          const parsed = this.parseDelimitedText(text, this.sourceLabel || 'Archivo');\n          added.push(...parsed);\n        } else if (ext === 'txt') {\n          const text = await f.text();\n          const parsed = this.parseTxtLines(text, this.sourceLabel || 'Archivo');\n          added.push(...parsed);\n        } else if (ext === 'pdf' || ext === 'doc' || ext === 'docx') {\n          unparsed.push({ name: f.name, kind: this.extOf(f.name), reason: 'Use copy–paste for PDFs/DOCs' });\n        } else {\n          unparsed.push({ name: f.name, kind: this.extOf(f.name), reason: 'Unsupported type' });\n        }\n      } catch (e) {\n        console.error('Read/parse failed:', f.name, e);\n        unparsed.push({ name: f.name, kind: this.extOf(f.name), reason: 'Read/parse error' });\n      }\n    }\n\n    if (added.length) {\n      this.rows = this.rows.concat(added);\n      this.refreshChart();\n      this.lastMessage = `Parsed ${added.length} row(s) from ${files.length} file(s).`;\n    }\n    if (unparsed.length) this.unparsedFiles.push(...unparsed);\n\n    this.busy = false;\n  }\n\n  private parseDelimitedText(raw: string, fuente: string): WorkerRow[] {\n    const lines = (raw || '').split(/\\r?\\n/).filter(l => l.trim().length > 0);\n    if (!lines.length) return [];\n    const sep = lines[0].includes('\\t') ? '\\t' : ',';\n    const headers = lines.shift()!.split(sep).map(h => h.trim().toLowerCase());\n\n    const out: WorkerRow[] = [];\n    for (const line of lines) {\n      const cols = line.split(sep).map(c => c.trim());\n      const obj: any = {};\n      headers.forEach((h, i) => obj[h] = cols[i] ?? '');\n      out.push(this.normalize(obj, fuente));\n    }\n    return out;\n  }\n\n  private parseTxtLines(raw: string, fuente: string): WorkerRow[] {\n    return (raw || '')\n      .split(/\\r?\\n/)\n      .map(s => s.trim())\n      .filter(Boolean)\n      .map(nombre => this.normalize({ nombre }, fuente));\n  }\n\n  // -------- Filters & paste modal --------\n  get visibleRows(): WorkerRow[] {\n    if (!this.selectedCategoria) return this.rows;\n    return this.rows.filter(r => (r.categoria_laboral || 'otro') === this.selectedCategoria);\n  }\n\n  toggleFilter(cat: string): void {\n    this.selectedCategoria = this.selectedCategoria === cat ? null : cat;\n    this.refreshChart();\n  }\n\n  clearFilter(): void {\n    this.selectedCategoria = null;\n    this.refreshChart();\n  }\n\n  closePaste() { this.showPaste = false; }\n\n  parsePasted(): void {\n    const raw = this.pasteText || '';\n    if (!raw.trim()) { this.closePaste(); return; }\n    let parsed: WorkerRow[] = [];\n    try {\n      parsed = this.parseDelimitedText(raw, this.sourceLabel || 'Manual');\n      if (!parsed.length) throw new Error('fallback');\n    } catch {\n      parsed = this.parseTxtLines(raw, this.sourceLabel || 'Manual');\n    }\n    if (parsed.length) {\n      this.rows = this.rows.concat(parsed);\n      this.refreshChart();\n      this.lastMessage = `Parsed ${parsed.length} row(s) from paste.`;\n    }\n    this.pasteText = '';\n    this.sourceLabel = 'Manual';\n    this.closePaste();\n  }\n\n  // -------- Normalization --------\n  private normalize(r: any, fuente = 'Manual'): WorkerRow {\n    const slug = (s: string) =>\n      (s || '').toLowerCase().replace(/\\s+/g, '_').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n    const toCanon = (val: string) => {\n      const s = slug(val);\n      if (!s) return 'otro';\n      if (s.includes('plom')) return 'plomero';\n      if (s.includes('carp')) return 'carpintero';\n      if (s.includes('pint')) return 'pintor';\n      if (s.includes('elect')) return 'electricista';\n      if (s.includes('sold')) return 'soldador';\n      if (s.includes('alban') || s.includes('albañ')) return 'albañil';\n      if (s.includes('tech') || s.includes('roof')) return 'techador';\n      if (s.includes('clima') || s.includes('hvac')) return 'climatizacion';\n      if (s.includes('paisaj') || s.includes('land')) return 'paisajista';\n      if (s.includes('mecan')) return 'mecanico';\n      if (s.includes('obrer') || s.includes('general')) return 'obrero_general';\n      return this.CANON.includes(s) ? s : 'otro';\n    };\n\n    const nombre =\n      r?.['nombre'] ?? r?.['name'] ?? r?.['full name'] ?? r?.['full_name'] ?? r?.['nombres y apellidos'] ?? '';\n    const telefono = r?.['telefono'] ?? r?.['phone'] ?? r?.['celular'] ?? r?.['mobile'] ?? '';\n    const email = r?.['email'] ?? r?.['correo'] ?? r?.['mail'] ?? '';\n    const direccion = r?.['direccion'] ?? r?.['address'] ?? '';\n    const catRaw =\n      r?.['categoria_laboral'] ?? r?.['categoria'] ?? r?.['category'] ?? r?.['ocupacion'] ?? r?.['job'] ?? '';\n\n    return {\n      nombre: (nombre || '').toString(),\n      telefono: (telefono || '').toString(),\n      email: (email || '').toString(),\n      direccion: (direccion || '').toString(),\n      categoria_laboral: toCanon(catRaw),\n      fuente\n    };\n  }\n\n  private extOf(name: string): string {\n    const m = (name || '').match(/\\.([^.]+)$/);\n    return (m?.[1] || '').toUpperCase();\n  }\n\n  // -------- Chart --------\n  private buildChart(): void {\n    if (!this.barChartRef?.nativeElement) return;\n    const ctx = this.barChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n\n    const cfg: ChartConfiguration<'bar'> = {\n      type: 'bar',\n      data: {\n        labels: this.CANON,\n        datasets: [{\n          label: 'Recursos',\n          data: new Array(this.CANON.length).fill(0)\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        scales: { y: { beginAtZero: true } }\n      }\n    };\n\n    if (this.chart) this.chart.destroy();\n    this.chart = new Chart(ctx, cfg);\n  }\n\n  private refreshChart(): void {\n    if (!this.chart) return;\n    const counts = this.CANON.reduce((acc, c) => { acc[c] = 0; return acc; }, {} as Record<string, number>);\n    const src = this.selectedCategoria ? this.visibleRows : this.rows;\n    for (const r of src) {\n      const key = (r.categoria_laboral || 'otro');\n      counts[key] = (counts[key] || 0) + 1;\n    }\n    (this.chart.data.datasets[0].data as number[]) = this.CANON.map(c => counts[c] || 0);\n    this.chart.update();\n  }\n}\n","<div class=\"wrap\" style=\"padding:20px;\">\n  <header class=\"brand\" style=\"display:flex;align-items:center;gap:12px;margin-bottom:12px;\">\n    <h1 style=\"margin:0;font-size:22px;\">Xjobs — CV Scanner</h1>\n  </header>\n\n  <section class=\"panel\" style=\"border:1px solid #e5e7eb;border-radius:10px;padding:12px;margin-bottom:12px;\">\n    <h2 style=\"margin:0 0 8px 0;font-size:16px;\">Upload files</h2>\n    <p *ngIf=\"lastMessage\" style=\"margin:4px 0 10px 0;color:#374151;\">{{ lastMessage }}</p>\n\n    <div style=\"display:flex;gap:8px;align-items:center;\">\n      <input\n        type=\"file\"\n        multiple\n        accept=\".csv,.tsv,.txt,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n        (change)=\"onFilesSelected($event)\"\n      />\n      <button type=\"button\" (click)=\"showPaste = true\">Paste rows</button>\n      <label style=\"display:flex;align-items:center;gap:6px;margin-left:auto;\">\n        <span>Source label</span>\n        <input type=\"text\" [(ngModel)]=\"sourceLabel\" style=\"padding:6px 8px;border:1px solid #d1d5db;border-radius:6px;min-width:160px;\" />\n      </label>\n    </div>\n  </section>\n\n  <section class=\"panel\" style=\"border:1px solid #e5e7eb;border-radius:10px;padding:12px;margin-bottom:12px;\">\n    <div style=\"display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:8px;\">\n      <h2 style=\"margin:0;font-size:16px;\">Categorías</h2>\n      <button type=\"button\" (click)=\"clearFilter()\" [disabled]=\"!selectedCategoria\">Clear filter</button>\n    </div>\n\n    <div style=\"display:flex;flex-wrap:wrap;gap:6px;margin-bottom:10px;\">\n      <button *ngFor=\"let cat of CANON\" type=\"button\"\n              (click)=\"toggleFilter(cat)\"\n              [ngStyle]=\"{ backgroundColor: (selectedCategoria === cat ? '#111827' : '#f3f4f6'), color: (selectedCategoria === cat ? '#fff' : '#111827') }\"\n              style=\"border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;cursor:pointer;\">\n        {{ cat }}\n      </button>\n    </div>\n\n    <div style=\"height:280px;position:relative;border:1px dashed #e5e7eb;border-radius:8px;padding:6px;\">\n      <canvas #barChart></canvas>\n    </div>\n  </section>\n\n  <section class=\"panel\" style=\"border:1px solid #e5e7eb;border-radius:10px;padding:12px;margin-bottom:12px;\">\n    <h2 style=\"margin:0 0 8px 0;font-size:16px;\">Resultados ({{ visibleRows.length }})</h2>\n    <div style=\"overflow:auto;border:1px solid #e5e7eb;border-radius:8px;\">\n      <table style=\"width:100%;border-collapse:collapse;font-size:14px;\">\n        <thead style=\"background:#f9fafb;\">\n          <tr><th>Nombre</th><th>Teléfono</th><th>Email</th><th>Dirección</th><th>Categoría</th><th>Fuente</th></tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let r of visibleRows\">\n            <td>{{ r.nombre || '-' }}</td><td>{{ r.telefono || '-' }}</td><td>{{ r.email || '-' }}</td>\n            <td>{{ r.direccion || '-' }}</td><td>{{ r.categoria_laboral || 'otro' }}</td><td>{{ r.fuente || 'Manual' }}</td>\n          </tr>\n          <tr *ngIf=\"!visibleRows.length\"><td colspan=\"6\" style=\"text-align:center;color:#6b7280;\">No hay filas para mostrar.</td></tr>\n        </tbody>\n      </table>\n    </div>\n  </section>\n\n  <section class=\"panel\" *ngIf=\"unparsedFiles.length\"\n           style=\"border:1px solid #e5e7eb;border-radius:10px;padding:12px;margin:12px 0;\">\n    <h2 style=\"margin:0 0 8px 0;font-size:16px;\">Archivos sin parsear ({{ unparsedFiles.length }})</h2>\n    <ul style=\"margin:0;padding-left:18px;\">\n      <li *ngFor=\"let f of unparsedFiles\">\n        {{ f.name }} <span style=\"color:#6b7280;\">({{ f.kind }})</span>\n        <span *ngIf=\"f.reason\" style=\"color:#9ca3af;\">– {{ f.reason }}</span>\n      </li>\n    </ul>\n  </section>\n\n  <div *ngIf=\"showPaste\" style=\"position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;z-index:50;\">\n    <div style=\"background:white;max-width:720px;width:92vw;border-radius:12px;padding:16px;\">\n      <h3 style=\"margin:0 0 8px 0;\">Paste CSV/TSV or one name per line</h3>\n      <textarea [(ngModel)]=\"pasteText\" rows=\"10\" style=\"width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;font-family:monospace;\"></textarea>\n      <div style=\"display:flex;gap:8px;justify-content:flex-end;margin-top:8px;\">\n        <button type=\"button\" (click)=\"closePaste()\">Cancel</button>\n        <button type=\"button\" (click)=\"parsePasted()\">Parse & Add</button>\n      </div>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}